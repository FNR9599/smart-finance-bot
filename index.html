<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#007AFF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Smart Finance</title>

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/apple.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAB BAR (–Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚Äî frosted glass) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <nav class="tab-bar" id="tabBar">
        <button class="tab-item active" data-tab="dashboard">
            <span class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </span>
            <span class="tab-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </button>
        <button class="tab-item" data-tab="history">
            <span class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </span>
            <span class="tab-label">–ò—Å—Ç–æ—Ä–∏—è</span>
        </button>
        <button class="tab-item" data-tab="analytics">
            <span class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="20" x2="18" y2="10"></line>
                    <line x1="12" y1="20" x2="12" y2="4"></line>
                    <line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
            </span>
            <span class="tab-label">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
        </button>
        <button class="tab-item" data-tab="settings">
            <span class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </span>
            <span class="tab-label">–ï—â—ë</span>
        </button>
    </nav>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DASHBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="screen active" id="screen-dashboard">
        <!-- Hero Card ‚Äî –±–∞–ª–∞–Ω—Å -->
        <div class="hero-card">
            <span class="hero-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</span>
            <div class="hero-amount" id="balanceAmount">0 UZS</div>
            <div class="hero-sub">
                <span class="hero-income" id="heroIncome">+0</span>
                <span class="hero-expense" id="heroExpense">-0</span>
            </div>
        </div>

        <!-- In Pocket –≤–∏–¥–∂–µ—Ç -->
        <div class="card in-pocket-card">
            <div class="in-pocket-header">
                <span class="in-pocket-icon">üëõ</span>
                <span class="in-pocket-title">In Pocket</span>
            </div>
            <div class="in-pocket-amount" id="inPocketAmount">0 UZS/–¥–µ–Ω—å</div>
            <div class="in-pocket-desc">–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ –≤ –¥–µ–Ω—å</div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
        <div class="section">
            <div class="section-header">
                <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ</h2>
                <button class="section-action" data-tab="history">–í—Å–µ ‚Üí</button>
            </div>
            <div class="transaction-list" id="recentTransactions">
                <div class="empty-state">
                    <span class="empty-icon">üì≠</span>
                    <p>–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
                    <p class="empty-hint">–ù–∞–∂–º–∏—Ç–µ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</p>
                </div>
            </div>
        </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HISTORY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="screen" id="screen-history">
        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="filter-bar">
            <button class="filter-chip active" data-filter="all">–í—Å–µ</button>
            <button class="filter-chip" data-filter="expense">–†–∞—Å—Ö–æ–¥—ã</button>
            <button class="filter-chip" data-filter="income">–î–æ—Ö–æ–¥—ã</button>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-bar">
            <input type="search" class="search-input" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π...">
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
        <div class="transaction-list full-list" id="historyList">
            <div class="empty-state">
                <span class="empty-icon">üì≠</span>
                <p>–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
            </div>
        </div>

        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
        <button class="load-more-btn" id="loadMoreBtn" style="display:none;">
            –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë
        </button>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ANALYTICS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="screen" id="screen-analytics">
        <!-- –ü–µ—Ä–∏–æ–¥ -->
        <div class="segment-control" id="analyticsPeriod">
            <button class="segment-item active" data-period="week">–ù–µ–¥–µ–ª—è</button>
            <button class="segment-item" data-period="month">–ú–µ—Å—è—Ü</button>
            <button class="segment-item" data-period="quarter">3 –º–µ—Å</button>
        </div>

        <!-- –°–≤–æ–¥–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-label">–î–æ—Ö–æ–¥—ã</span>
                <span class="stat-value income" id="statIncome">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–†–∞—Å—Ö–æ–¥—ã</span>
                <span class="stat-value expense" id="statExpense">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–°—Ä–µ–¥–Ω–∏–π/–¥–µ–Ω—å</span>
                <span class="stat-value" id="statAvgDaily">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</span>
                <span class="stat-value" id="statCount">0</span>
            </div>
        </div>

        <!-- Donut chart -->
        <div class="card chart-card">
            <h3 class="card-title">–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
            <div class="chart-container" id="donutChart">
                <canvas id="donutCanvas" width="300" height="300"></canvas>
            </div>
            <div class="chart-legend" id="donutLegend"></div>
        </div>

        <!-- Bar chart -->
        <div class="card chart-card">
            <h3 class="card-title">–î–æ—Ö–æ–¥—ã vs –†–∞—Å—Ö–æ–¥—ã</h3>
            <div class="chart-container" id="barChart">
                <canvas id="barCanvas" width="600" height="300"></canvas>
            </div>
        </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SETTINGS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="screen" id="screen-settings">
        <div class="settings-group">
            <h3 class="settings-group-title">–û—Å–Ω–æ–≤–Ω—ã–µ</h3>
            <div class="settings-item" id="settingCurrency">
                <span class="settings-icon">üí±</span>
                <span class="settings-label">–í–∞–ª—é—Ç–∞</span>
                <span class="settings-value" id="settingCurrencyValue">UZS</span>
                <span class="settings-arrow">‚Ä∫</span>
            </div>
            <div class="settings-item" id="settingDigest">
                <span class="settings-icon">üì¨</span>
                <span class="settings-label">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç</span>
                <label class="toggle">
                    <input type="checkbox" id="digestToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <div class="settings-group">
            <h3 class="settings-group-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
            <div class="categories-grid" id="categoriesGrid">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>

        <div class="settings-group">
            <h3 class="settings-group-title">–î–∞–Ω–Ω—ã–µ</h3>
            <div class="settings-item" id="settingExportXlsx">
                <span class="settings-icon">üìä</span>
                <span class="settings-label">–≠–∫—Å–ø–æ—Ä—Ç Excel</span>
                <span class="settings-arrow">‚Ä∫</span>
            </div>
            <div class="settings-item" id="settingExportCsv">
                <span class="settings-icon">üìÑ</span>
                <span class="settings-label">–≠–∫—Å–ø–æ—Ä—Ç CSV</span>
                <span class="settings-arrow">‚Ä∫</span>
            </div>
        </div>

        <div class="app-info">
            <p>Smart Finance Bot v1.0</p>
            <p class="app-info-sub">–õ–∏—á–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</p>
        </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ADD TRANSACTION (Bottom Sheet) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="overlay" id="overlay"></div>
    <div class="bottom-sheet" id="addSheet">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">–ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è</h2>

        <!-- –¢–∏–ø: —Ä–∞—Å—Ö–æ–¥ / –¥–æ—Ö–æ–¥ -->
        <div class="segment-control" id="txTypeSegment">
            <button class="segment-item active" data-type="expense">–†–∞—Å—Ö–æ–¥</button>
            <button class="segment-item" data-type="income">–î–æ—Ö–æ–¥</button>
        </div>

        <!-- –°—É–º–º–∞ -->
        <div class="amount-input-wrap">
            <input type="number" class="amount-input" id="txAmount"
                   placeholder="0" inputmode="decimal" autofocus>
            <span class="amount-currency" id="txCurrency">UZS</span>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="categories-selector" id="txCategories">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>

        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
        <input type="text" class="comment-input" id="txComment"
               placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">

        <!-- –î–∞—Ç–∞ -->
        <input type="date" class="date-input" id="txDate">
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FAB (–∫–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <button class="fab" id="fabAdd">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
    </button>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/telegram.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
