/* ══════════════════════════════════════════════════════════════
   Apple Design System — базовые стили, переменные, типографика
   ══════════════════════════════════════════════════════════════ */

/* ── CSS Variables (адаптация к теме Telegram) ── */
:root {
    /* Фоны */
    --bg-primary: var(--tg-theme-bg-color, #FFFFFF);
    --bg-secondary: var(--tg-theme-secondary-bg-color, #F2F2F7);
    --bg-tertiary: #FFFFFF;

    /* Текст */
    --text-primary: var(--tg-theme-text-color, #000000);
    --text-secondary: rgba(60, 60, 67, 0.6);
    --text-tertiary: rgba(60, 60, 67, 0.3);

    /* Акценты */
    --accent: var(--tg-theme-button-color, #007AFF);
    --accent-text: var(--tg-theme-button-text-color, #FFFFFF);
    --success: #34C759;
    --danger: #FF3B30;
    --warning: #FF9500;

    /* Компоненты */
    --separator: rgba(60, 60, 67, 0.12);
    --card-bg: var(--tg-theme-bg-color, #FFFFFF);
    --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    --card-radius: 16px;

    /* Размеры */
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --tab-height: 52px;
    --fab-size: 56px;

    /* Типографика */
    --font: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
    --font-display: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
    --font-rounded: -apple-system, BlinkMacSystemFont, 'SF Pro Rounded', 'Segoe UI', Roboto, sans-serif;
}

/* Dark mode — автоопределение через Telegram тему */
@media (prefers-color-scheme: dark) {
    :root {
        --bg-primary: var(--tg-theme-bg-color, #000000);
        --bg-secondary: var(--tg-theme-secondary-bg-color, #1C1C1E);
        --bg-tertiary: #2C2C2E;
        --text-primary: var(--tg-theme-text-color, #FFFFFF);
        --text-secondary: rgba(235, 235, 245, 0.6);
        --text-tertiary: rgba(235, 235, 245, 0.3);
        --separator: rgba(84, 84, 88, 0.65);
        --card-bg: #1C1C1E;
        --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
}

/* ── Reset & Base ── */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
}

body {
    font-family: var(--font);
    background: var(--bg-secondary);
    color: var(--text-primary);
    line-height: 1.47;
    overflow-x: hidden;
    padding-bottom: calc(var(--tab-height) + var(--safe-bottom) + 16px);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ── Типографика ── */
h1, h2, h3 {
    font-family: var(--font-display);
    font-weight: 700;
}

h1 { font-size: 34px; letter-spacing: 0.37px; }
h2 { font-size: 22px; letter-spacing: 0.35px; }
h3 { font-size: 17px; letter-spacing: -0.41px; font-weight: 600; }

/* ── Scrollbar ── */
::-webkit-scrollbar {
    display: none;
}

body {
    scrollbar-width: none;
}

/* ── Selection ── */
::selection {
    background: var(--accent);
    color: var(--accent-text);
}

/* ── Focus ── */
:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 4px;
}
